{"version":3,"sources":["../../src/controllers/bills.js"],"names":["req","res","next","query","user","skip","limit","billsService","getAllBills","result","status","send","paidOut","id","getBillsByStatusOfPayment","body","length","obj","constructor","Object","mountMockFalse","mockResult","Response","Ok","error","getBillsByStatusOfPaymentMock","createUnpaidBill","paymentService","sendBillsToUser","map","r","s","isPaid","name","price"],"mappings":"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","file":"bills.js","sourcesContent":["import { billsService } from '../services'\r\nimport { Response } from '../helpers'\r\n\r\nexport async function getAllBills (req, res, next) {\r\n  try {\r\n    const { user, skip, limit } = req.query\r\n\r\n    const result = await billsService.getAllBills(user, skip, limit)\r\n\r\n    res.status(200).send(result)\r\n  } catch (error) {\r\n    res.status(500).send(error)\r\n  }\r\n}\r\n\r\nexport async function getBillsByStatusOfPayment (req, res, next) {\r\n  try {\r\n    const { user, paidOut, skip, limit, id } = req.query\r\n\r\n    let result = await billsService.getBillsByStatusOfPayment(user, paidOut, skip, limit)\r\n\r\n    res.status(200).send(result)\r\n  } catch (error) {\r\n    res.status(500).send(error)\r\n  } \r\n}\r\n\r\n\r\nexport async function getBillsByStatusOfPaymentMock (req, res, next) {\r\n  try {\r\n    let result = {}\r\n    \r\n    if (req.body.length > 0 && Object.keys(obj).length !== 0 && obj.constructor !== Object) {      \r\n      result = mountMockFalse(req.body)\r\n    }\r\n    else {\r\n      result = mockResult()\r\n    }\r\n\r\n    \r\n    res.status(200).send(Response.Ok(result, \"Contas não pagas\"))\r\n  } catch (error) {\r\n    res.status(500).send(error)\r\n  } \r\n}\r\n\r\nexport async function createUnpaidBill (req, res, next) {\r\n  try {\r\n    const result = await billsService.createUnpaidBill(req.body)\r\n\r\n    res.status(200).send(result)\r\n  } catch (error) {\r\n    res.status(500).send(error)\r\n  } \r\n}\r\n\r\nexport async function sendBillsToUser(req, res, next) {\r\n  try {\r\n    const result = await paymentService.sendBillsToUser(req.body)\r\n\r\n    res.status(200).send(result)\r\n  } catch (error) {\r\n    res.status(500).send(error)\r\n  }\r\n}\r\n\r\nfunction mountMockFalse(id) {\r\n  var result = mockResult()\r\n\r\n  id.map(s => {\r\n    result.map(r => {\r\n      if (r.id = s)\r\n        r.isPaid = true\r\n    })    \r\n  })\r\n\r\n  return result\r\n}\r\n\r\nfunction mockResult() {\r\n  let result = [{\r\n    id: \"5e4c738182d3576726ea2f4c\",\r\n    name: 'Conta de Luz',\r\n    price: '199.99',\r\n    isPaid: false\r\n  },\r\n  {\r\n    id: \"5e4c739196908953145a81c6\",\r\n    name: 'Conta de Água',\r\n    price: '200.00',\r\n    isPaid: false\r\n  },\r\n  {\r\n    id: \"5e4c739e9365142de3f74609\",\r\n    name: 'Conta de IPTU',\r\n    price: '57.60',\r\n    isPaid: false\r\n  },\r\n  {\r\n    id: \"5e4c73b00c74b443ae7e083d\",\r\n    name: 'Conta de Gás',\r\n    price: '32.65',\r\n    isPaid: false\r\n  },\r\n  {\r\n    id: \"5e4c73bdf358897f149ecf8f\",\r\n    name: 'Conta de Bombeiro',\r\n    price: '25.25',\r\n    isPaid: false\r\n  },\r\n  {\r\n    id: \"5e4c73df3537428e6bf16b58\",\r\n    name: 'Casas Bahia',\r\n    price: '64.89',\r\n    isPaid: true\r\n  },\r\n  {\r\n    id: \"5e4c73eb886fd304becb82d7\",\r\n    name: 'Netflix',\r\n    price: '29.99',\r\n    isPaid: true\r\n  }]\r\n\r\n  return result\r\n}\r\n"]}